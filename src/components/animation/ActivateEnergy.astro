---
import Lightning from '../Svg/Icons/Lightning.astro';
---

<aside
	class='fixed bottom-sm right-sm flex flex-col items-center gap-sm z-[9]'>
	<div
		id='energy-activate-button'
		class='border rounded-full border-green h-[2.5rem] w-[5rem] relative cursor-pointer group'>
		<div
			id='energy-activate-switch'
			class='absolute left-0 top-0 h-full aspect-square bg-green rounded-full grid place-items-center group-hover:scale-[1.3] transition-all duration-100 ease-in-out'>
			<Lightning />
		</div>
	</div>
	<div class='text-green'>Energie aktivieren!</div>
</aside>
<script>
	import { gsap } from 'gsap';
	let isRight = false;
	const btn = document.getElementById('energy-activate-button');
	const switchIcon = document.getElementById(
		'energy-activate-switch'
	);
	const footer = document.getElementById('index-footer');
	if (btn && switchIcon && footer) {
		btn.addEventListener('click', () => {
			if (!isRight) {
				gsap.to(switchIcon, {
					right: 0,
					left: 'auto',
					duration: 0.1,
					ease: 'power2.out',
				});
				gsap.to(btn, {
					backgroundColor: 'var(--color-green)',
					duration: 0.1,
					ease: 'power2.out',
				});
				footer.scrollIntoView({
					behavior: 'smooth',
					block: 'start',
					inline: 'nearest',
				});
				isRight = true;
			} else {
				gsap.to(switchIcon, {
					right: 'auto',
					left: 0,
					duration: 0.1,
					ease: 'power2.out',
				});
				gsap.to(btn, {
					backgroundColor: 'transparent',
					duration: 0.1,
					ease: 'power2.out',
				});
				isRight = false;
			}
		});
	}
</script>
